<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head}">
    <title>Productos - Pink Hazze</title>
</head>
<body class="min-h-screen flex flex-col">
    <nav th:replace="~{fragments/layout :: navbar}"></nav>

    <main class="flex-1 p-6">
        <div class="container">
            <div class="max-w-4xl mx-auto">
                <!-- Header -->
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h1 class="text-3xl font-bold">Gestión de Productos</h1>
                        <p style="color: var(--muted-foreground);">Administra tu catálogo de productos de cuidado de la piel</p>
                    </div>
                    <a th:href="@{/productos/nuevo}" class="btn btn-primary">
                        <i class="fa-solid fa-plus icon"></i>
                        Nuevo Producto
                    </a>
                </div>

                <!-- Tabla de productos -->
                <div class="card">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Categoría</th>
                                <th>Marca</th>
                                <th>Precio Detalle</th>
                                <th>Cantidad</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="productTableBody">
                            <!-- Los productos se cargarán aquí dinámicamente -->
                            <tr th:if="${productos != null and !productos.empty}" th:each="producto : ${productos}">
                                <td>
                                    <div>
                                        <div class="font-semibold" th:text="${producto.nombre}"></div>
                                    </div>
                                </td>
                                <td th:text="${producto.categoria.nombre}"></td>
                                <td th:text="${producto.marca.nombre}"></td>
                                <td th:text="'$' + ${producto.precioDetalle}"></td>
                                <td>
                                    <span class="px-2 py-1 rounded text-sm"
                                          th:classappend="${producto.cantidad > 10 ? 'bg-green-100 text-green-800' : producto.cantidad > 0 ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800'}"
                                          th:text="${producto.cantidad}"></span>
                                </td>
                                <td>
                                    <span class="px-2 py-1 rounded text-sm"
                                          th:classappend="${producto.cantidad > 0 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}"
                                          th:text="${producto.cantidad > 0 ? 'Disponible' : 'Agotado'}"></span>
                                </td>
                                <td>
                                    <div class="flex gap-2">
                                        <a th:href="@{'/productos/editar/' + ${producto.id}}" class="btn btn-outline btn-sm">
                                            <i class="fa-solid fa-pen-to-square icon"></i>
                                        </a>
                                        <a th:href="@{'/productos/eliminar/' + ${producto.id}}" class="btn btn-outline btn-sm" style="color: #dc2626;" onclick="return confirm('¿Eliminar producto?');">
                                            <i class="fa-solid fa-trash icon"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>

                            <!-- Productos de ejemplo si no hay datos -->
                            <tr th:if="${productos == null or productos.empty}">
                                <td colspan="7" class="text-center p-6" style="color: var(--muted-foreground);">
                                    No hay productos registrados.
                                    <a th:href="@{/productos/nuevo}" class="btn btn-primary btn-sm mt-2">
                                        Agregar el primero
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
    </main>

    <footer th:replace="~{fragments/layout :: footer}"></footer>
</body>
</html>